# 上位机与Lite通讯JSON文档

## 说明
JSON标识 | 英语注释 | 中文注释 | 备注
:---|:---|:---|:---
**d** | Device | 设备种类 | 1:DLT645 2: Modbus TCP
**a** | Data | 数据 | 
**f** | DeviceFrom | 读取远程设备的地址 |
**t** | DeviceTo | 存储本地Lite的地址 |
**ip** | IpFrom | 读取设备的ip:socket:device_id |

## 格式
```json
{"d"："1","a":[{"f":"t"},{"f":"t"},...]}
```

## 列子
### dlt645设备： 
```json
{"d":"1",
 "a":[{"40001":41001},
      {"40002":41002},
        .............]
}
```
### Modbus Tcp设备： 
```json
{"d":"2",
 "ip":"192.168.1.1:5002:01",
 "a":[{"04:40001:5":"400010:5"},
      {"04,40002,5":"400012,5"},
      .........................]
}
```
### 通讯流程
1. 上位机传数据给Lite，JSON如下:
```json
{"d":"1",
 "a":[{"40001":0},
      {"40002":0},
        .............]
}
```
2. Lite分配本地Modbus地址
3. Lite将DeviceFrom与DeviceTo配对存储到本地数据库或文件
4. Lite将数据传回给上位机，JSON如下:
```json
{"d":"1",
 "a":[{"40001":41001},
      {"40002":41002},
        .............]
}
```